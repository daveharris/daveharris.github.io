---
layout: post
title: DNS-323 Setup
categories:
- DNS-323
tags: []
status: publish
type: post
published: true
meta:
  _wp_old_slug: ''
  _elasticsearch_indexed_on: '2010-11-22 00:09:43'
---
This is a list of steps and resources used to set up my Dlink DNS-323 RevB
<h2>Phase 1: Upgrade firmware</h2>
Upgrade to the <a href="http://www.dlink.com.au/tech/Download/download.aspx?product=DNS-323">latest firmware</a>

Alternatively, use the custom <a href="http://code.google.com/p/alt-f">alt-f firmware</a>.
<h2>Phase 2: Correctly format 4k drives</h2>
Western Digital 4k sector drives (EARS) are not correctly formatted by the DNS-323, and <a href="http://forums.dlink.com/index.php?topic=14484.0">the partitions must be setup manually to align with the cylinder boundaries.</a>
<h2>Phase 3: FFP</h2>
<h3>Phase 3.1: Standard FFP</h3>
<a href="http://nas-tweaks.net/CH3SNAS:Tutorials/fun_plug#Steps_for_installing_fun_plug">Install Fonz Fun_plug (FFP)</a> and enable ssh.  Then <a href="http://nas-tweaks.net/CH3SNAS:Tutorials/ffp-packages#Downloading_packages">setup additional packages</a> and install bash, dnsmasq, screen, sudo and vim ffp packages

<em><em>Advantage: Installs ssh, telnet, bash and other useful tools</em>
</em>

<em>Disadvantage: Files stored on / ramdisk so have to replace modified config files each reboot.  Also there is still git package</em>
<h3>Phase 3.2: Optware</h3>
<a href="http://wiki.dns323.info/howto:optware">Install optware</a> which allows <a href="http://ipkg.nslu2-linux.org/feeds/optware/dns323/cross/unstable/">many more packages</a> to be installed, which allows git installation

<em>Disadvantage: Still have to workaround ramdisk issues and fragments package management - some built-in, some in ffp, some in optware</em>
<h2>Phase 4: Debian chroot</h2>
<h3>Phase 4.1: Debian Etch</h3>
<a href="http://wiki.dns323.info/howto:chroot_debian#the_easy_way">Download and install Debian Etch chroot</a>.

<a href="http://forum.dsmg600.info/viewtopic.php?pid=26426#p26426">Follow the upgrade path</a>:
<ul>
	<li>Upgrade via apt-get to Debian Lenny.</li>
	<li>Install samba, using the standard smb.conf as a base.</li>
	<li>Create standard user account, lockdown ssh access</li>
</ul>
<em>Advantage: No more ramdisk issues, more control over package management and running a real linux distro</em>

<em><em>Disadvantage: Running an old version of Debian (stable) which is arm, not the newer armel architecture</em></em>
<h2>Phase 5: Alt-f Replacement Firmware</h2>
Debian Squeeze (debian-testing) is available only in the newer 'armel' architecture, not in the older 'arm' architecture.  The default firmware is arm and therefore cannot run squeeze.  <a href="code.google.com/p/alt-f">Alt-f</a> is an alternative custom firmware which is running on the 'armel' architecture as well as supporting some things that the default does not, such as ext4.  It can be run ontop of the default firmware, but that has the same problems ramdisk problems as before.  It an replace the default firmware by flashing the device but that seems a little dangerous and with limited benefit.  This may be required is Lenny is no longer supported.
<h3>Phase 5.1: Debian Squeeze Chroot</h3>
<a href="http://forum.dsmg600.info/viewtopic.php?id=4330">Download, create and install Debi﻿an Squeeze chroot﻿</a>.

<em>Advantage: A newer version (unstable) of Debian.</em>
