---
layout: post
title: Search for Sub-Recipe in Expanded Run List in Chef
categories:
- How-to
tags:
- Chef
- ruby
status: publish
type: post
published: true
meta:
  _publicize_pending: '1'
  _elasticsearch_indexed_on: '2013-05-16 21:52:53'
---
If you are wanting to search for all nodes with a recipe in Chef you can <a href="http://docs.opscode.com/essentials_search.html#nodes" title="Chef Search">search</a>
```ruby Standard Search http://docs.opscode.com/essentials_search.html#nodes Documentation
search(:node, 'recipes:ruby-build')
```

If you want to search for a sub-recipe (instead of ruby_build::default), you need to double escape it, like:
```ruby Sub-recipe Search http://docs.opscode.com/essentials_search.html#nodes Documentation
search(:node, 'recipes:glusterfs\\:\\:server')
```

This took ages for me to figure out and there doesn't seem to be any documentation written about it.
