---
layout: post
title: SVN Dump Parts of a Repository
categories:
- How-to
tags: []
status: publish
type: post
published: true
---
Today at work at <a href="http://fronde.com">Fronde</a> I needed to create a dump of a 'project' inside a repository.  Our SVN setup is to have one repo per team and then within there have a folder for each client/project.  In this case I was providing the backup to a client so it was vital that I gave them <strong>just</strong> their code and not the whole repo.

So my SVN repo was like this:
<pre>/
  teamA
    clientA
    clientB
  teamB
    clientC</pre>
To dump the clientA history into a portable, re-creatable format, I used <a href="http://svnbook.red-bean.com/en/1.1/re31.html">svnadmin dump</a>, like this:
<pre>svnadmin dump [path to repo] &gt; repo.dump</pre>
Which creates a dump of the entire repository into a file called repo.dump.  This took about 10 mins with 1000 versions and used 100% CPU so it would be best to perform this outside of normal work hours.  You have been warned!

I then used <a href="http://svnbook.red-bean.com/en/1.0/ch05s03.html">svndumpfilter</a> (<a href="http://svnbook.red-bean.com/en/1.4/svn.reposadmin.maint.html#svn.reposadmin.maint.filtering">tutorial</a>) to filter just for the ClientA folder (see folder tree above):
<pre>svndumpfilter include clientA &lt; repo.dump &gt; clientA.dump</pre>
If you have nested repositories, then it breaks with a syntax error.  To get around this you need to run the dump multiple times using the 'exclude' directive until you have what you want:
<pre>svndumpfilter <strong>exclude</strong> clientB &lt; repo.dump <strong>&gt;&gt;</strong> clientA.dump
svndumpfilter <strong>exclude</strong> clientC &lt; repo.dump <strong>&gt;&gt;</strong> clientA.dump</pre>
<span style="font-family:Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif;line-height:19px;white-space:normal;font-size:13px;">This didn't take very long and at the end I had a full svn repository that could be re-created anywhere.  To prove the point I <a href="http://www.wikihow.com/Install-Subversion-on-Mac-OS-X">installed SVN on my mac</a> and created the repository.  I then loaded the dump file into it and it worked beautifully ;)</span>
<pre>svnadmin create /Users/Dave/ClientA
svnadmin load /Users/Dave/ClientA &lt; ClientA.bak
mkdir /Users/Dave/ClientA-checkout
svn co file:///Users/Dave/ClientA clientA-checkout/</pre>
Now that you have checked it, you can delete the whole repo backup file (mine was massive) Repo.svn-dump in my case.

Easy as pie once you know how.  The fact that you can't specify the filter at dump-time is non-intutative, clunky and frankly a waste of space.  However if you only need to do it once it works and produces a very nice result.  Open Source and Open Standards FTW ;)
